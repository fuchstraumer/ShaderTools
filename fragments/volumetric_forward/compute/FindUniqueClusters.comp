layout(local_size_x = 1024)

#pragma USE_RESOURCES VOLUMETRIC_FORWARD

void main() {
    int idx = int(gl_GlobalInvocationID.x);
    if (imageLoad(Flags, idx).r == 1) {
        uint unique_idx = atomicCounterIncrement(UniqueClustersCounter);
        imageStore(UniqueClusters, int(unique_idx), uvec4(idx, 0, 0, 0));
    }
}
